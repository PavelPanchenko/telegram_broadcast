# План миграции на SQLite БД

## Преимущества миграции

1. **Надежность**: ACID транзакции, целостность данных
2. **Производительность**: Быстрее работа с большими объемами данных
3. **Масштабируемость**: Легче добавлять индексы и оптимизировать запросы
4. **Безопасность**: Лучше контроль доступа к данным
5. **Удобство**: Один файл БД вместо множества JSON файлов

## Шаги миграции

### 1. Установка зависимостей

```bash
npm install better-sqlite3
```

### 2. Структура БД

Создать таблицы:
- `users` - пользователи
- `tokens` - токены ботов
- `channels` - каналы
- `posts_history` - история постов
- `templates` - шаблоны
- `scheduled_posts` - запланированные посты
- `recurring_posts` - автоматические посты
- `channel_groups` - группы каналов
- `logs` - логи действий

### 3. Миграция данных

Скрипт для переноса данных из JSON в SQLite:
- Читает все JSON файлы
- Вставляет данные в БД
- Сохраняет старые файлы как backup

### 4. Обновление кода

Заменить все функции работы с JSON на SQL запросы:
- `getUsers()` → SQL SELECT
- `saveUsers()` → SQL INSERT/UPDATE
- И т.д. для всех сущностей

### 5. Тестирование

- Проверить все функции
- Убедиться, что данные корректно мигрировали
- Протестировать производительность

## Альтернатива: PostgreSQL

Если нужна более мощная БД:
- Использовать `pg` или `postgres.js`
- Подходит для продакшн окружений
- Требует отдельный сервер БД

## Рекомендация

Начать с SQLite:
- Проще в настройке
- Не требует отдельного сервера
- Легко мигрировать на PostgreSQL позже
- Достаточно для большинства случаев

