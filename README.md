# Telegram Broadcast

Веб-приложение для массовой отправки постов в Telegram каналы с расширенным функционалом.

## Возможности

### Основные функции
- ✅ Массовая отправка постов в несколько каналов одновременно
- ✅ Поддержка изображений, видео и документов
- ✅ Множественные изображения в одном посте (галерея)
- ✅ Планирование постов на определенное время
- ✅ История всех отправленных постов
- ✅ Шаблоны постов для быстрого создания
- ✅ Форматирование текста (HTML/Markdown)
- ✅ Inline-кнопки под постами
- ✅ Автосохранение черновиков

### Управление каналами
- ✅ Добавление/удаление каналов
- ✅ Теги и категории для каналов
- ✅ Поиск и фильтрация каналов
- ✅ Экспорт/импорт списка каналов
- ✅ Проверка прав бота в каналах
- ✅ Автоматическая проверка прав администратора

### Дополнительно
- ✅ Оптимизация изображений перед отправкой
- ✅ Retry механизм при ошибках
- ✅ Rate limiting для защиты API
- ✅ Логирование всех действий
- ✅ Базовая аутентификация (опционально)
- ✅ Адаптивный интерфейс

## Установка

1. Установите зависимости:
```bash
npm install
```

2. Создайте файл `.env` в корне проекта:
```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
PORT=5001

# Опционально: базовая аутентификация
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_password
```

3. Получите токен бота:
   - Найдите [@BotFather](https://t.me/BotFather) в Telegram
   - Отправьте команду `/newbot`
   - Следуйте инструкциям для создания бота
   - Скопируйте полученный токен в файл `.env`

4. Добавьте бота администратором в каналы, куда хотите отправлять посты

## Запуск

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:3000`

## Использование

### Создание поста
1. Перейдите на вкладку "Создать пост"
2. Введите текст поста (поддерживается HTML/Markdown форматирование)
3. При необходимости добавьте файлы (изображения, видео, документы) - до 10 файлов
4. Добавьте кнопки под постом (опционально)
5. Выберите каналы для отправки (можно использовать поиск)
6. Запланируйте отправку или отправьте сразу

### Управление каналами
1. Перейдите на вкладку "Каналы"
2. Добавьте канал: введите ID (@channel или -1001234567890) и название
3. Добавьте теги для группировки каналов
4. Используйте поиск и фильтры по тегам
5. Экспортируйте или импортируйте список каналов

### Шаблоны
1. Перейдите на вкладку "Шаблоны"
2. Создайте шаблон с часто используемым текстом
3. Используйте шаблон при создании поста одним кликом

### Запланированные посты
1. При создании поста укажите дату и время отправки
2. Просматривайте все запланированные посты на соответствующей вкладке
3. Удаляйте запланированные посты при необходимости

### История
- Просматривайте историю всех отправленных постов
- Видите результаты отправки по каждому каналу
- Фильтруйте по количеству записей

### Проверка прав
- Регулярно проверяйте права бота во всех каналах
- Получайте отчет о статусе прав в каждом канале

## Форматирование текста

### HTML
```html
<b>жирный</b>
<i>курсив</i>
<a href="https://example.com">ссылка</a>
<code>код</code>
```

### Markdown
```markdown
**жирный**
*курсив*
[ссылка](https://example.com)
`код`
```

## Технические детали

- **Максимальный размер файла**: 10 МБ
- **Максимум файлов**: 10 на пост
- **Поддерживаемые форматы изображений**: JPEG, PNG, GIF, WebP
- **Поддерживаемые форматы видео**: MP4, MOV
- **Поддерживаемые документы**: PDF, DOC, DOCX
- **История постов**: последние 100 записей
- **Логи**: последние 500 записей

## Структура данных

Все данные сохраняются в файлах JSON в папке `server/`:
- `channels.json` - список каналов
- `posts-history.json` - история постов
- `templates.json` - шаблоны
- `scheduled-posts.json` - запланированные посты
- `logs.json` - логи действий

## Безопасность

- Rate limiting: максимум 100 запросов за 15 минут
- Валидация файлов на сервере
- Опциональная базовая аутентификация
- Проверка прав бота перед добавлением канала

## Примечания

- Бот должен быть администратором всех каналов, куда вы хотите отправлять посты
- Изображения автоматически оптимизируются перед отправкой
- При ошибках отправка повторяется до 3 раз
- Черновики автоматически сохраняются в браузере
